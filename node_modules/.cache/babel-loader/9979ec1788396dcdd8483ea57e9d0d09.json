{"ast":null,"code":"import _regeneratorRuntime from \"/Users/heoseongjae/Documents/\\u110C\\u1161\\u11A8\\u110B\\u1165\\u11B8/banto-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/heoseongjae/Documents/\\u110C\\u1161\\u11A8\\u110B\\u1165\\u11B8/banto-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/heoseongjae/Documents/\\u110C\\u1161\\u11A8\\u110B\\u1165\\u11B8/banto-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/heoseongjae/Documents/\\u110C\\u1161\\u11A8\\u110B\\u1165\\u11B8/banto-web/src/pages/simplePay/SimplePayRenting.js\";\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport axios from \"axios\";\nimport constants from \"../../Constants\";\nimport moment from \"moment\";\nimport { Stack, Typography, Button } from \"@mui/material\";\nimport { Box } from \"@mui/system\";\nimport ReplyIcon from \"../../assets/icon/reply.png\";\nimport CustomCenterBox from \"../../components/CustomCenterBox\";\nimport BantoLogo from \"../../assets/icon/banto_text_logo.png\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport ReturnSuccessImg from \"../../assets/img/return_success.png\";\nimport ReturnCheckingImg from \"../../assets/img/return_checking.png\";\nimport AgreeButton from \"../../components/AgreeButton\";\nimport CancleButton from \"../../components/CancleButton\";\n\nvar intervalBetween = function intervalBetween(rentTime) {\n  if (rentTime === null) {\n    return \"--: -- : --\";\n  }\n\n  var rentalTime = moment(rentTime);\n  var now = moment();\n  var diff = now.diff(rentalTime, \"seconds\", true);\n  var formatted = moment.utc(diff * 1000).format(\"HH : mm : ss\");\n  return formatted;\n};\n\nfunction leadingZeros(n, digits) {\n  var zero = \"\";\n  n = n.toString();\n\n  if (n.length < digits) {\n    for (var i = 0; i < digits - n.length; i++) {\n      zero += \"0\";\n    }\n  }\n\n  return zero + n;\n}\n\nfunction getTimeStamp(time) {\n  var d = new Date(time);\n  var s = leadingZeros(d.getFullYear(), 4) + \"-\" + leadingZeros(d.getMonth() + 1, 2) + \"-\" + leadingZeros(d.getDate(), 2) + \" \" + leadingZeros(d.getHours(), 2) + \":\" + leadingZeros(d.getMinutes(), 2) + \":\" + leadingZeros(d.getSeconds(), 2);\n  return s;\n}\n\nexport default function App(props) {\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      stationId = _useState2[0],\n      setStationId = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      returned = _useState4[0],\n      setReturned = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      rented = _useState6[0],\n      setRented = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      rentStatus = _useState8[0],\n      setRentStatus = _useState8[1];\n\n  var _useState9 = useState(\"-\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      storeName = _useState10[0],\n      setStoreName = _useState10[1];\n\n  var isoStartTime = useMemo(function () {\n    return new Date(rented);\n  }, [rented]);\n\n  var _useState11 = useState(intervalBetween(rented)),\n      _useState12 = _slicedToArray(_useState11, 2),\n      runningTime = _useState12[0],\n      setRunningTime = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      dialogOpen = _useState14[0],\n      setDialogOpen = _useState14[1];\n\n  var _useState15 = useState(false),\n      _useState16 = _slicedToArray(_useState15, 2),\n      returnStatus = _useState16[0],\n      setReturnStatus = _useState16[1];\n\n  var _useState17 = useState(\"\"),\n      _useState18 = _slicedToArray(_useState17, 2),\n      reason = _useState18[0],\n      setReason = _useState18[1]; // 사용 시간\n\n\n  useEffect(function () {\n    var interval = setInterval(function () {\n      setRunningTime(intervalBetween(rented));\n    }, 1000);\n    return function () {\n      clearInterval(interval);\n    };\n  }, [isoStartTime]);\n  useEffect(function () {\n    _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _yield$axios$post, store;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return axios.post(constants.hosts.banto + \"/banto2/app/store/getStoreName\", {\n                stationId: sessionStorage.getItem(\"stationId\")\n              });\n\n            case 2:\n              _yield$axios$post = _context.sent;\n              store = _yield$axios$post.data;\n\n              if (store.code === 200) {\n                setStoreName(store.data.storeName);\n              }\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  }, []);\n  useEffect(function () {\n    if (props.location.state !== undefined) {\n      setStationId(props.location.state.stationId);\n    }\n  }, []);\n  useEffect(function () {\n    _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var result;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return axios.post(constants.hosts.banto + \"/banto2/app/rent/lastRent\", {\n                userId: sessionStorage.getItem(\"userId\")\n              });\n\n            case 2:\n              result = _context2.sent;\n\n              if (!(result.data.code !== 200)) {\n                _context2.next = 6;\n                break;\n              }\n\n              window.alert(\"시스템 에러: 반토 고객센터에 문의하세요\");\n              return _context2.abrupt(\"return\");\n\n            case 6:\n              setRentStatus(result.data.data.bRenting && result.data.data.bRenting.status);\n              setReturned(result.data.data.bRenting && result.data.data.bRenting.returnTimeStamp);\n              setRented(result.data.data.bRenting && result.data.data.bRenting.rentalTimeStamp);\n              return _context2.abrupt(\"return\");\n\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }))();\n  }, []);\n\n  var returnCheck = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var result, msg, _yield$axios$get, data;\n\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return axios.post(constants.hosts.banto + \"/banto2/app/rent/lastRent\", {\n                userId: sessionStorage.getItem(\"userId\")\n              });\n\n            case 2:\n              result = _context3.sent;\n\n              if (!(result.data.code !== 200)) {\n                _context3.next = 6;\n                break;\n              }\n\n              window.alert(\"시스템 에러: 반토 고객센터에 문의하세요\");\n              return _context3.abrupt(\"return\");\n\n            case 6:\n              setRentStatus(result.data.data.bRenting && result.data.data.bRenting.status);\n              setReturned(result.data.data.bRenting && result.data.data.bRenting.returnTimeStamp);\n              setRented(result.data.data.bRenting && result.data.data.bRenting.rentalTimeStamp);\n\n              if (!(result.data.data.bRenting && result.data.data.bRenting.returnTimeStamp !== null)) {\n                _context3.next = 21;\n                break;\n              }\n\n              setReturnStatus(true);\n              msg = \"반납이 완료되었습니다\";\n\n              if (!(result.data.data.bRenting.status === \"return_payment_fail\")) {\n                _context3.next = 19;\n                break;\n              }\n\n              _context3.next = 15;\n              return axios.get(\"\".concat(constants.hosts.banto, \"/banto2/app/log/\").concat(result.data.data.bRenting.userId, \"/payment-fail/\").concat(result.data.data.bRenting.rentId));\n\n            case 15:\n              _yield$axios$get = _context3.sent;\n              data = _yield$axios$get.data;\n              setReason(data.reason);\n              msg += \"\\n\".concat(data.reason);\n\n            case 19:\n              _context3.next = 22;\n              break;\n\n            case 21:\n              setReturnStatus(false);\n\n            case 22:\n              setDialogOpen(true);\n              return _context3.abrupt(\"return\", {\n                code: 200\n              });\n\n            case 24:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function returnCheck() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      backgroundColor: \"#0B0B0C\",\n      height: \"100%\",\n      paddingTop: \"50px\",\n      paddingBottom: \"50px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CustomCenterBox, {\n    sx: {\n      pt: \"20%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CustomCenterBox, {\n    sx: {\n      p: 3,\n      alignItems: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: BantoLogo,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(CustomCenterBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    color: \"#00E676\",\n    fontFamily: \"Montserrat\",\n    fontWeight: 700,\n    fontSize: 50,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 9\n    }\n  }, rentStatus === \"return_payment_fail\" ? \"반납 결제 실패\" : runningTime), /*#__PURE__*/React.createElement(Typography, {\n    color: \"#00E676\",\n    fontWeight: 300,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 9\n    }\n  }, \"\\uD604\\uC7AC \\uC774\\uC6A9 \\uC2DC\\uAC04\")), /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      p: 1,\n      pl: 2,\n      pr: 2\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      backgroundColor: \"black\",\n      border: \"2px solid #242427\",\n      boxSizing: \"border-box\",\n      borderRadius: \"15px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      p: 3\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Stack, {\n    spacing: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      justifyContent: \"space-between\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    color: \"#94949d\",\n    fontSize: 14,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 17\n    }\n  }, \"\\uB300\\uC5EC \\uC2DC\\uAC04\"), /*#__PURE__*/React.createElement(Typography, {\n    color: \"#EAEBF1\",\n    fontWeight: 600,\n    fontSize: 16,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 17\n    }\n  }, rented && getTimeStamp(rented))), /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      justifyContent: \"space-between\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    color: \"#94949d\",\n    fontSize: 14,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 17\n    }\n  }, \"\\uB0A8\\uC740 \\uC2DC\\uAC04\"), /*#__PURE__*/React.createElement(Typography, {\n    color: \"#EAEBF1\",\n    fontWeight: 600,\n    fontSize: 16,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 17\n    }\n  }, \"-\")), /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      justifyContent: \"space-between\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    color: \"#94949d\",\n    fontSize: 14,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 17\n    }\n  }, \"\\uB300\\uC5EC \\uC9C0\\uC810\"), /*#__PURE__*/React.createElement(Typography, {\n    color: \"#EAEBF1\",\n    fontWeight: 600,\n    fontSize: 16,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 17\n    }\n  }, storeName)), /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      justifyContent: \"space-between\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    color: \"#94949d\",\n    fontSize: 14,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 19\n    }\n  }, \"\\uCD94\\uAC00 \\uC774\\uC6A9\\uB8CC\"), /*#__PURE__*/React.createElement(Typography, {\n    color: \"#94949d\",\n    fontSize: 14,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 19\n    }\n  }, \"(10\\uBD84/150\\uC6D0)\")), /*#__PURE__*/React.createElement(Typography, {\n    color: \"#EAEBF1\",\n    fontWeight: 600,\n    fontSize: 16,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 17\n    }\n  }, \"-\")))))), /*#__PURE__*/React.createElement(Box, {\n    p: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    sx: {\n      width: \"100%\",\n      border: \"2px solid #313139\",\n      backgroundColor: \"black\",\n      borderRadius: \"15px\",\n      color: \"#00C853\",\n      justifyContent: \"space-between\",\n      padding: \"10px 24px\"\n    },\n    onClick: returnCheck,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 9\n    }\n  }, \"\\uBC18\\uB0A9 \\uD655\\uC778\", /*#__PURE__*/React.createElement(\"img\", {\n    src: ReplyIcon,\n    alt: \"\",\n    width: \"4%\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(Dialog, {\n    fullScreen: true,\n    open: dialogOpen,\n    onClose: function onClose() {\n      setDialogOpen(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      backgroundColor: \"#0B0B0C\",\n      height: \"100%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CustomCenterBox, {\n    sx: {\n      pt: \"50%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 11\n    }\n  }, returnStatus ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"img\", {\n    src: ReturnSuccessImg,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Box, {\n    pt: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    color: \"white\",\n    fontSize: 24,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 19\n    }\n  }, \"\\uBCF4\\uC870\\uBC30\\uD130\\uB9AC \\uBC18\\uB0A9 \\uC644\\uB8CC\"), reason && /*#__PURE__*/React.createElement(Typography, {\n    color: \"white\",\n    fontSize: 24,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 21\n    }\n  }, reason)), /*#__PURE__*/React.createElement(Box, {\n    pt: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(AgreeButton, {\n    text: \"\\uD655\\uC778\",\n    onClick: function onClick() {\n      window.location.replace(\"https://csb-8ehm7l-n7ytrtxex-morenicejay.vercel.app/\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 19\n    }\n  }))) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"img\", {\n    src: ReturnCheckingImg,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Box, {\n    pt: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    color: \"white\",\n    fontSize: 24,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 19\n    }\n  }, \"\\uBCF4\\uC870\\uBC30\\uD130\\uB9AC \\uBC18\\uB0A9 \\uD655\\uC778 \\uC911\"), /*#__PURE__*/React.createElement(Typography, {\n    color: \"white\",\n    fontSize: 24,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 19\n    }\n  }, \"\\uC7A0\\uC2DC \\uD6C4 \\uB2E4\\uC2DC \\uD655\\uC778\\uD574\\uC8FC\\uC138\\uC694\")), /*#__PURE__*/React.createElement(Box, {\n    pt: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(CancleButton, {\n    text: \"\\uB3CC\\uC544\\uAC00\\uAE30\",\n    onClick: function onClick() {\n      setDialogOpen(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 19\n    }\n  })))))));\n}","map":{"version":3,"sources":["/Users/heoseongjae/Documents/작업/banto-web/src/pages/simplePay/SimplePayRenting.js"],"names":["React","useEffect","useMemo","useState","axios","constants","moment","Stack","Typography","Button","Box","ReplyIcon","CustomCenterBox","BantoLogo","Dialog","ReturnSuccessImg","ReturnCheckingImg","AgreeButton","CancleButton","intervalBetween","rentTime","rentalTime","now","diff","formatted","utc","format","leadingZeros","n","digits","zero","toString","length","i","getTimeStamp","time","d","Date","s","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","App","props","stationId","setStationId","returned","setReturned","rented","setRented","rentStatus","setRentStatus","storeName","setStoreName","isoStartTime","runningTime","setRunningTime","dialogOpen","setDialogOpen","returnStatus","setReturnStatus","reason","setReason","interval","setInterval","clearInterval","post","hosts","banto","sessionStorage","getItem","store","data","code","location","state","undefined","userId","result","window","alert","bRenting","status","returnTimeStamp","rentalTimeStamp","returnCheck","msg","get","rentId","backgroundColor","height","paddingTop","paddingBottom","pt","p","alignItems","pl","pr","border","boxSizing","borderRadius","display","flexDirection","justifyContent","width","color","padding","replace"],"mappings":"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","sourcesContent":["import React, { useEffect, useMemo, useState } from \"react\";\nimport axios from \"axios\";\nimport constants from \"../../Constants\";\nimport moment from \"moment\";\n\nimport { Stack, Typography, Button } from \"@mui/material\";\nimport { Box } from \"@mui/system\";\nimport ReplyIcon from \"../../assets/icon/reply.png\";\nimport CustomCenterBox from \"../../components/CustomCenterBox\";\n\nimport BantoLogo from \"../../assets/icon/banto_text_logo.png\";\n\nimport Dialog from \"@material-ui/core/Dialog\";\n\nimport ReturnSuccessImg from \"../../assets/img/return_success.png\";\nimport ReturnCheckingImg from \"../../assets/img/return_checking.png\";\nimport AgreeButton from \"../../components/AgreeButton\";\nimport CancleButton from \"../../components/CancleButton\";\n\nconst intervalBetween = (rentTime) => {\n  if (rentTime === null) {\n    return \"--: -- : --\";\n  }\n  var rentalTime = moment(rentTime);\n  var now = moment();\n\n  var diff = now.diff(rentalTime, \"seconds\", true);\n  const formatted = moment.utc(diff * 1000).format(\"HH : mm : ss\");\n\n  return formatted;\n};\n\nfunction leadingZeros(n, digits) {\n  var zero = \"\";\n  n = n.toString();\n\n  if (n.length < digits) {\n    for (let i = 0; i < digits - n.length; i++) zero += \"0\";\n  }\n  return zero + n;\n}\n\nfunction getTimeStamp(time) {\n  var d = new Date(time);\n  var s =\n    leadingZeros(d.getFullYear(), 4) +\n    \"-\" +\n    leadingZeros(d.getMonth() + 1, 2) +\n    \"-\" +\n    leadingZeros(d.getDate(), 2) +\n    \" \" +\n    leadingZeros(d.getHours(), 2) +\n    \":\" +\n    leadingZeros(d.getMinutes(), 2) +\n    \":\" +\n    leadingZeros(d.getSeconds(), 2);\n\n  return s;\n}\n\nexport default function App(props) {\n  const [stationId, setStationId] = useState(\"\");\n  const [returned, setReturned] = useState(null);\n  const [rented, setRented] = useState(null);\n  const [rentStatus, setRentStatus] = useState(null);\n\n  const [storeName, setStoreName] = useState(\"-\");\n\n  const isoStartTime = useMemo(() => new Date(rented), [rented]);\n  const [runningTime, setRunningTime] = useState(intervalBetween(rented));\n\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const [returnStatus, setReturnStatus] = useState(false);\n\n  const [reason, setReason] = useState(\"\");\n\n  // 사용 시간\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setRunningTime(intervalBetween(rented));\n    }, 1000);\n    return () => {\n      clearInterval(interval);\n    };\n  }, [isoStartTime]);\n\n  useEffect(() => {\n    (async () => {\n      const { data: store } = await axios.post(\n        constants.hosts.banto + \"/banto2/app/store/getStoreName\",\n        {\n          stationId: sessionStorage.getItem(\"stationId\"),\n        }\n      );\n\n      if (store.code === 200) {\n        setStoreName(store.data.storeName);\n      }\n    })();\n  }, []);\n\n  useEffect(() => {\n    if (props.location.state !== undefined) {\n      setStationId(props.location.state.stationId);\n    }\n  }, []);\n\n  useEffect(() => {\n    (async () => {\n      const result = await axios.post(\n        constants.hosts.banto + \"/banto2/app/rent/lastRent\",\n        {\n          userId: sessionStorage.getItem(\"userId\"),\n        }\n      );\n\n      if (result.data.code !== 200) {\n        window.alert(\"시스템 에러: 반토 고객센터에 문의하세요\");\n        return;\n      }\n      setRentStatus(\n        result.data.data.bRenting && result.data.data.bRenting.status\n      );\n      setReturned(\n        result.data.data.bRenting && result.data.data.bRenting.returnTimeStamp\n      );\n      setRented(\n        result.data.data.bRenting && result.data.data.bRenting.rentalTimeStamp\n      );\n\n      return;\n    })();\n  }, []);\n\n  const returnCheck = async () => {\n    const result = await axios.post(\n      constants.hosts.banto + \"/banto2/app/rent/lastRent\",\n      {\n        userId: sessionStorage.getItem(\"userId\"),\n      }\n    );\n\n    if (result.data.code !== 200) {\n      window.alert(\"시스템 에러: 반토 고객센터에 문의하세요\");\n      return;\n    }\n    setRentStatus(\n      result.data.data.bRenting && result.data.data.bRenting.status\n    );\n    setReturned(\n      result.data.data.bRenting && result.data.data.bRenting.returnTimeStamp\n    );\n    setRented(\n      result.data.data.bRenting && result.data.data.bRenting.rentalTimeStamp\n    );\n\n    if (\n      result.data.data.bRenting &&\n      result.data.data.bRenting.returnTimeStamp !== null\n    ) {\n      setReturnStatus(true);\n      let msg = \"반납이 완료되었습니다\";\n\n      if (result.data.data.bRenting.status === \"return_payment_fail\") {\n        const { data } = await axios.get(\n          `${constants.hosts.banto}/banto2/app/log/${result.data.data.bRenting.userId}/payment-fail/${result.data.data.bRenting.rentId}`\n        );\n\n        setReason(data.reason);\n        msg += `\\n${data.reason}`;\n      }\n    } else {\n      setReturnStatus(false);\n    }\n\n    setDialogOpen(true);\n\n    return { code: 200 };\n  };\n\n  return (\n    <Box\n      sx={{\n        backgroundColor: \"#0B0B0C\",\n        height: \"100%\",\n        paddingTop: \"50px\",\n        paddingBottom: \"50px\",\n      }}\n    >\n      <CustomCenterBox sx={{ pt: \"20%\" }}>\n        <CustomCenterBox sx={{ p: 3, alignItems: \"center\" }}>\n          <img src={BantoLogo} alt=\"\" />\n        </CustomCenterBox>\n      </CustomCenterBox>\n\n      <CustomCenterBox>\n        <Typography\n          color=\"#00E676\"\n          fontFamily=\"Montserrat\"\n          fontWeight={700}\n          fontSize={50}\n        >\n          {rentStatus === \"return_payment_fail\"\n            ? \"반납 결제 실패\"\n            : runningTime}\n        </Typography>\n        <Typography color=\"#00E676\" fontWeight={300}>\n          현재 이용 시간\n        </Typography>\n      </CustomCenterBox>\n\n      <Box sx={{ p: 1, pl: 2, pr: 2 }}>\n        <Box\n          sx={{\n            backgroundColor: \"black\",\n            border: \"2px solid #242427\",\n            boxSizing: \"border-box\",\n            borderRadius: \"15px\",\n          }}\n        >\n          <Box sx={{ p: 3 }}>\n            <Stack spacing={3}>\n              <Box\n                sx={{\n                  display: \"flex\",\n                  flexDirection: \"row\",\n                  justifyContent: \"space-between\",\n                }}\n              >\n                <Typography color=\"#94949d\" fontSize={14}>\n                  대여 시간\n                </Typography>\n                <Typography color=\"#EAEBF1\" fontWeight={600} fontSize={16}>\n                  {rented && getTimeStamp(rented)}\n                </Typography>\n              </Box>\n\n              <Box\n                sx={{\n                  display: \"flex\",\n                  flexDirection: \"row\",\n                  justifyContent: \"space-between\",\n                }}\n              >\n                <Typography color=\"#94949d\" fontSize={14}>\n                  남은 시간\n                </Typography>\n                <Typography color=\"#EAEBF1\" fontWeight={600} fontSize={16}>\n                  -\n                </Typography>\n              </Box>\n\n              <Box\n                sx={{\n                  display: \"flex\",\n                  flexDirection: \"row\",\n                  justifyContent: \"space-between\",\n                }}\n              >\n                <Typography color=\"#94949d\" fontSize={14}>\n                  대여 지점\n                </Typography>\n                <Typography color=\"#EAEBF1\" fontWeight={600} fontSize={16}>\n                  {storeName}\n                </Typography>\n              </Box>\n              <Box\n                sx={{\n                  display: \"flex\",\n                  flexDirection: \"row\",\n                  justifyContent: \"space-between\",\n                }}\n              >\n                <Box>\n                  <Typography color=\"#94949d\" fontSize={14}>\n                    추가 이용료\n                  </Typography>\n                  <Typography color=\"#94949d\" fontSize={14}>\n                    (10분/150원)\n                  </Typography>\n                </Box>\n                <Typography color=\"#EAEBF1\" fontWeight={600} fontSize={16}>\n                  -\n                </Typography>\n              </Box>\n            </Stack>\n          </Box>\n        </Box>\n      </Box>\n\n      <Box p={2}>\n        <Button\n          sx={{\n            width: \"100%\",\n            border: \"2px solid #313139\",\n            backgroundColor: \"black\",\n            borderRadius: \"15px\",\n            color: \"#00C853\",\n            justifyContent: \"space-between\",\n            padding: \"10px 24px\",\n          }}\n          onClick={returnCheck}\n        >\n          반납 확인\n          <img src={ReplyIcon} alt=\"\" width=\"4%\" />\n        </Button>\n      </Box>\n\n      <Dialog\n        fullScreen\n        open={dialogOpen}\n        onClose={() => {\n          setDialogOpen(false);\n        }}\n      >\n        <Box sx={{ backgroundColor: \"#0B0B0C\", height: \"100%\" }}>\n          <CustomCenterBox sx={{ pt: \"50%\" }}>\n            {returnStatus ? (\n              <>\n                <img src={ReturnSuccessImg} alt=\"\" />\n                <Box pt={5}>\n                  <Typography color=\"white\" fontSize={24}>\n                    보조배터리 반납 완료\n                  </Typography>\n                  {reason && (\n                    <Typography color=\"white\" fontSize={24}>\n                      {reason}\n                    </Typography>\n                  )}\n                </Box>\n                <Box pt={5}>\n                  <AgreeButton\n                    text=\"확인\"\n                    onClick={() => {\n                      window.location.replace(\n                        \"https://csb-8ehm7l-n7ytrtxex-morenicejay.vercel.app/\"\n                      );\n                    }}\n                  />\n                </Box>\n              </>\n            ) : (\n              <>\n                <img src={ReturnCheckingImg} alt=\"\" />\n                <Box pt={5}>\n                  <Typography color=\"white\" fontSize={24}>\n                    보조배터리 반납 확인 중\n                  </Typography>\n                  <Typography color=\"white\" fontSize={24}>\n                    잠시 후 다시 확인해주세요\n                  </Typography>\n                </Box>\n                <Box pt={5}>\n                  <CancleButton\n                    text=\"돌아가기\"\n                    onClick={() => {\n                      setDialogOpen(false);\n                    }}\n                  />\n                </Box>\n              </>\n            )}\n          </CustomCenterBox>\n        </Box>\n      </Dialog>\n    </Box>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}