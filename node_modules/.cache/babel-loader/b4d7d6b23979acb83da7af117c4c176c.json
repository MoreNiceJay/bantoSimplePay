{"ast":null,"code":"import _regeneratorRuntime from\"/Users/heoseongjae/Documents/\\u110C\\u1161\\u11A8\\u110B\\u1165\\u11B8/banto-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/heoseongjae/Documents/\\u110C\\u1161\\u11A8\\u110B\\u1165\\u11B8/banto-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/heoseongjae/Documents/\\u110C\\u1161\\u11A8\\u110B\\u1165\\u11B8/banto-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import{makeStyles}from\"@material-ui/core/styles\";import axios from\"axios\";import{Link}from\"react-router-dom\";import constants from\"../../Constants\";import qs from\"qs\";import{useLocation}from\"react-router-dom\";var useStyles=makeStyles({});export default function App(props){var location=useLocation();var query=qs.parse(props.location.search,{ignoreQueryPrefix:true// /about?details=true 같은 쿼리 주소의 '?'를 생략해주는 옵션입니다.\n});var _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),userId=_React$useState2[0],setUserId=_React$useState2[1];var _React$useState3=React.useState(null),_React$useState4=_slicedToArray(_React$useState3,2),pgToken=_React$useState4[0],setPgToken=_React$useState4[1];var classes=useStyles();var bull=/*#__PURE__*/React.createElement(\"span\",{className:classes.bullet},\"\\u2022\");function getQuery(variable){var query=window.location.search.substring(1);var vars=query.split('&');for(var i=0;i<vars.length;i++){var pair=vars[i].split('=');if(decodeURIComponent(pair[0])==variable){return decodeURIComponent(pair[1]);}}}React.useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var uid,pg;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:uid=getQuery(\"userId\");pg=getQuery(\"pg_token\");setUserId(uid);setPgToken(pg);case 4:case\"end\":return _context.stop();}}},_callee);}))();},[]);React.useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var approveUrl,result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(pgToken===null)){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:approveUrl=\"https://api.banto.io/banto2/app/user/approveKakaoPay/\".concat(userId,\"/?pg_token=\").concat(pgToken);_context2.next=5;return axios.get(approveUrl);case 5:result=_context2.sent;if(!(result.data.code!==200)){_context2.next=10;break;}alert(\"카카오 등록실패 : 다시 처음부터 시도해 주세요\");props.history.push(\"https://banto.io\");return _context2.abrupt(\"return\");case 10:props.history.push(\"/\"+result.data.url);case 11:case\"end\":return _context2.stop();}}},_callee2);}))();},[pgToken]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",{style:{fontSize:\"18px\"}},\"\\uCE74\\uCE74\\uC624 \\uD398\\uC774 \\uB4F1\\uB85D\\uC911\")));}","map":{"version":3,"sources":["/Users/heoseongjae/Documents/작업/banto-web/src/pages/simplePay/ApproveKakaoPay.js"],"names":["React","makeStyles","axios","Link","constants","qs","useLocation","useStyles","App","props","location","query","parse","search","ignoreQueryPrefix","useState","userId","setUserId","pgToken","setPgToken","classes","bull","bullet","getQuery","variable","window","substring","vars","split","i","length","pair","decodeURIComponent","useEffect","uid","pg","approveUrl","get","result","data","code","alert","history","push","url","fontSize"],"mappings":"mkBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,UAAT,KAA2B,0BAA3B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,SAAP,KAAsB,iBAAtB,CACA,MAAOC,CAAAA,EAAP,KAAe,IAAf,CACA,OAASC,WAAT,KAA4B,kBAA5B,CAEA,GAAMC,CAAAA,SAAS,CAAGN,UAAU,CAAC,EAAD,CAA5B,CACA,cAAe,SAASO,CAAAA,GAAT,CAAaC,KAAb,CAAoB,CAC/B,GAAMC,CAAAA,QAAQ,CAAGJ,WAAW,EAA5B,CACA,GAAMK,CAAAA,KAAK,CAAGN,EAAE,CAACO,KAAH,CAASH,KAAK,CAACC,QAAN,CAAeG,MAAxB,CAAgC,CAC1CC,iBAAiB,CAAE,IAAK;AADkB,CAAhC,CAAd,CAGA,oBAA4Bd,KAAK,CAACe,QAAN,CAAe,IAAf,CAA5B,oDAAOC,MAAP,qBAAeC,SAAf,qBACA,qBAA8BjB,KAAK,CAACe,QAAN,CAAe,IAAf,CAA9B,qDAAOG,OAAP,qBAAgBC,UAAhB,qBACA,GAAMC,CAAAA,OAAO,CAAGb,SAAS,EAAzB,CACA,GAAMc,CAAAA,IAAI,cAAG,4BAAM,SAAS,CAAED,OAAO,CAACE,MAAzB,WAAb,CACA,QAASC,CAAAA,QAAT,CAAkBC,QAAlB,CAA4B,CACxB,GAAIb,CAAAA,KAAK,CAAGc,MAAM,CAACf,QAAP,CAAgBG,MAAhB,CAAuBa,SAAvB,CAAiC,CAAjC,CAAZ,CACA,GAAIC,CAAAA,IAAI,CAAGhB,KAAK,CAACiB,KAAN,CAAY,GAAZ,CAAX,CACA,IAAK,GAAIC,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGF,IAAI,CAACG,MAAzB,CAAiCD,CAAC,EAAlC,CAAsC,CAClC,GAAIE,CAAAA,IAAI,CAAGJ,IAAI,CAACE,CAAD,CAAJ,CAAQD,KAAR,CAAc,GAAd,CAAX,CACA,GAAII,kBAAkB,CAACD,IAAI,CAAC,CAAD,CAAL,CAAlB,EAA+BP,QAAnC,CAA6C,CACzC,MAAOQ,CAAAA,kBAAkB,CAACD,IAAI,CAAC,CAAD,CAAL,CAAzB,CACH,CACJ,CACJ,CACD/B,KAAK,CAACiC,SAAN,CAAgB,UAAM,CAElB,wDAAC,8IACSC,GADT,CACeX,QAAQ,CAAC,QAAD,CADvB,CAESY,EAFT,CAEcZ,QAAQ,CAAC,UAAD,CAFtB,CAGGN,SAAS,CAACiB,GAAD,CAAT,CACAf,UAAU,CAACgB,EAAD,CAAV,CAJH,sDAAD,KAMH,CARD,CAQG,EARH,EASAnC,KAAK,CAACiC,SAAN,CAAgB,UAAM,CAClB,wDAAC,mKACOf,OAAO,GAAK,IADnB,oEAISkB,UAJT,gEAI8EpB,MAJ9E,uBAIkGE,OAJlG,yBAKwBhB,CAAAA,KAAK,CAACmC,GAAN,CAAUD,UAAV,CALxB,QAKSE,MALT,qBAMOA,MAAM,CAACC,IAAP,CAAYC,IAAZ,GAAqB,GAN5B,4BAOOC,KAAK,CAAC,4BAAD,CAAL,CACAhC,KAAK,CAACiC,OAAN,CAAcC,IAAd,CAAmB,kBAAnB,EARP,0CAWGlC,KAAK,CAACiC,OAAN,CAAcC,IAAd,CAAmB,IAAML,MAAM,CAACC,IAAP,CAAYK,GAArC,EAXH,yDAAD,KAcH,CAfD,CAeG,CAAC1B,OAAD,CAfH,EAgBA,mBACI,qDACI,4CACI,yBAAG,KAAK,CAAE,CAAE2B,QAAQ,CAAE,MAAZ,CAAV,uDADJ,CADJ,CADJ,CAOH","sourcesContent":["import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport constants from \"../../Constants\"\nimport qs from \"qs\";\nimport { useLocation } from \"react-router-dom\";\n\nconst useStyles = makeStyles({});\nexport default function App(props) {\n    const location = useLocation();\n    const query = qs.parse(props.location.search, {\n        ignoreQueryPrefix: true // /about?details=true 같은 쿼리 주소의 '?'를 생략해주는 옵션입니다.\n    });\n    const [userId, setUserId] = React.useState(null)\n    const [pgToken, setPgToken] = React.useState(null)\n    const classes = useStyles();\n    const bull = <span className={classes.bullet}>•</span>;\n    function getQuery(variable) {\n        var query = window.location.search.substring(1);\n        var vars = query.split('&');\n        for (var i = 0; i < vars.length; i++) {\n            var pair = vars[i].split('=');\n            if (decodeURIComponent(pair[0]) == variable) {\n                return decodeURIComponent(pair[1]);\n            }\n        }\n    }\n    React.useEffect(() => {\n\n        (async () => {\n            const uid = getQuery(\"userId\")\n            const pg = getQuery(\"pg_token\")\n            setUserId(uid)\n            setPgToken(pg)\n        })()\n    }, []);\n    React.useEffect(() => {\n        (async () => {\n            if (pgToken === null) {\n                return\n            }\n            const approveUrl = `https://api.banto.io/banto2/app/user/approveKakaoPay/${userId}/?pg_token=${pgToken}`\n            const result = await axios.get(approveUrl)\n            if (result.data.code !== 200) {\n                alert(\"카카오 등록실패 : 다시 처음부터 시도해 주세요\")\n                props.history.push(\"https://banto.io\")\n                return\n            }\n            props.history.push(\"/\" + result.data.url)\n        })()\n\n    }, [pgToken]);\n    return (\n        <>\n            <div>\n                <p style={{ fontSize: \"18px\" }}>카카오 페이 등록중</p>\n            </div>\n        </>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}