{"ast":null,"code":"import _regeneratorRuntime from \"/Users/heoseongjae/Documents/\\u110C\\u1161\\u11A8\\u110B\\u1165\\u11B8/banto-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/heoseongjae/Documents/\\u110C\\u1161\\u11A8\\u110B\\u1165\\u11B8/banto-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/heoseongjae/Documents/\\u110C\\u1161\\u11A8\\u110B\\u1165\\u11B8/banto-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/heoseongjae/Documents/\\u110C\\u1161\\u11A8\\u110B\\u1165\\u11B8/banto-web/src/views/simplePay/ApproveKakaoPay.js\";\nimport React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport constants from \"../../Constants\";\nimport qs from \"qs\";\nimport { useLocation } from \"react-router-dom\";\nvar useStyles = makeStyles({});\nexport default function App(props) {\n  var location = useLocation();\n  var query = qs.parse(props.location.search, {\n    ignoreQueryPrefix: true // /about?details=true 같은 쿼리 주소의 '?'를 생략해주는 옵션입니다.\n\n  });\n\n  var _React$useState = React.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      userId = _React$useState2[0],\n      setUserId = _React$useState2[1];\n\n  var _React$useState3 = React.useState(null),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      pgToken = _React$useState4[0],\n      setPgToken = _React$useState4[1];\n\n  var classes = useStyles();\n  var bull = /*#__PURE__*/React.createElement(\"span\", {\n    className: classes.bullet,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 18,\n      columnNumber: 18\n    }\n  }, \"\\u2022\");\n\n  function getQuery(variable) {\n    var query = window.location.search.substring(1);\n    var vars = query.split('&');\n\n    for (var i = 0; i < vars.length; i++) {\n      var pair = vars[i].split('=');\n\n      if (decodeURIComponent(pair[0]) == variable) {\n        return decodeURIComponent(pair[1]);\n      }\n    }\n  }\n\n  React.useEffect(function () {\n    _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var uid, pg;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              uid = getQuery(\"userId\");\n              pg = getQuery(\"pg_token\");\n              setUserId(uid);\n              setPgToken(pg);\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  }, []);\n  React.useEffect(function () {\n    _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var approveUrl, result;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!(pgToken === null)) {\n                _context2.next = 2;\n                break;\n              }\n\n              return _context2.abrupt(\"return\");\n\n            case 2:\n              approveUrl = \"https://api.banto.io/banto2/app/user/approveKakaoPay/\".concat(userId, \"/?pg_token=\").concat(pgToken);\n              _context2.next = 5;\n              return axios.get(approveUrl);\n\n            case 5:\n              result = _context2.sent;\n\n              if (!(result.data.code !== 200)) {\n                _context2.next = 10;\n                break;\n              }\n\n              alert(\"카카오 등록실패 : 다시 처음부터 시도해 주세요\");\n              props.history.push(\"https://banto.io\");\n              return _context2.abrupt(\"return\");\n\n            case 10:\n              props.history.push(\"/\" + result.data.url);\n\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }))();\n  }, [pgToken]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      fontSize: \"18px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }\n  }, \"\\uCE74\\uCE74\\uC624 \\uD398\\uC774 \\uB4F1\\uB85D\\uC911\")));\n}","map":{"version":3,"sources":["/Users/heoseongjae/Documents/작업/banto-web/src/views/simplePay/ApproveKakaoPay.js"],"names":["React","makeStyles","axios","Link","constants","qs","useLocation","useStyles","App","props","location","query","parse","search","ignoreQueryPrefix","useState","userId","setUserId","pgToken","setPgToken","classes","bull","bullet","getQuery","variable","window","substring","vars","split","i","length","pair","decodeURIComponent","useEffect","uid","pg","approveUrl","get","result","data","code","alert","history","push","url","fontSize"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport constants from \"../../Constants\"\nimport qs from \"qs\";\nimport { useLocation } from \"react-router-dom\";\n\nconst useStyles = makeStyles({});\nexport default function App(props) {\n    const location = useLocation();\n    const query = qs.parse(props.location.search, {\n        ignoreQueryPrefix: true // /about?details=true 같은 쿼리 주소의 '?'를 생략해주는 옵션입니다.\n    });\n    const [userId, setUserId] = React.useState(null)\n    const [pgToken, setPgToken] = React.useState(null)\n    const classes = useStyles();\n    const bull = <span className={classes.bullet}>•</span>;\n    function getQuery(variable) {\n        var query = window.location.search.substring(1);\n        var vars = query.split('&');\n        for (var i = 0; i < vars.length; i++) {\n            var pair = vars[i].split('=');\n            if (decodeURIComponent(pair[0]) == variable) {\n                return decodeURIComponent(pair[1]);\n            }\n        }\n    }\n    React.useEffect(() => {\n\n        (async () => {\n            const uid = getQuery(\"userId\")\n            const pg = getQuery(\"pg_token\")\n            setUserId(uid)\n            setPgToken(pg)\n        })()\n    }, []);\n    React.useEffect(() => {\n        (async () => {\n            if (pgToken === null) {\n                return\n            }\n            const approveUrl = `https://api.banto.io/banto2/app/user/approveKakaoPay/${userId}/?pg_token=${pgToken}`\n            const result = await axios.get(approveUrl)\n            if (result.data.code !== 200) {\n                alert(\"카카오 등록실패 : 다시 처음부터 시도해 주세요\")\n                props.history.push(\"https://banto.io\")\n                return\n            }\n            props.history.push(\"/\" + result.data.url)\n        })()\n\n    }, [pgToken]);\n    return (\n        <>\n            <div>\n                <p style={{ fontSize: \"18px\" }}>카카오 페이 등록중</p>\n            </div>\n        </>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}